# US-09: Admin xem danh sách đơn hàng

## Bối cảnh
- Epic: Mua sắm & Giỏ hàng
- Vai trò: Admin
- Mục tiêu: Cho phép admin xem và quản lý tất cả đơn hàng của khách hàng, theo dõi trạng thái và cập nhật tiến trình giao hàng.

## Phạm vi
- Trang quản lý đơn hàng (`/admin/orders`)
- Hiển thị dashboard thống kê đơn theo trạng thái
- Bảng danh sách đơn hàng với filter
- Chức năng xem chi tiết đơn
- Chức năng cập nhật trạng thái đơn

## Luồng chính (happy path)
- Admin đăng nhập và vào trang `/admin/orders`
- UI hiển thị dashboard thống kê:
    - Tổng số đơn
    - Số đơn theo từng trạng thái (pending, confirmed, shipped, delivered, cancelled)
- Admin xem bảng danh sách đơn với các cột: Mã đơn, Khách hàng, Tổng tiền, Trạng thái, Ngày tạo
- Admin có thể filter đơn theo trạng thái
- Admin click vào đơn để xem chi tiết (danh sách sản phẩm, địa chỉ...)
- Admin có thể đổi trạng thái đơn bằng dropdown inline
- Trạng thái cập nhật ngay lập tức trên UI

## Luồng lỗi cần xử lý
- User thường truy cập: Redirect về trang chủ (403 Forbidden)
- Lỗi load dữ liệu: Hiển thị thông báo và nút retry
- Lỗi cập nhật trạng thái: Hiển thị toast lỗi, giữ nguyên trạng thái cũ

## Dữ liệu & validate gợi ý
- Orders API Response: `{ orders: [{ id, user, total_amount, status, created_at, items }] }`
- Status values: `pending | confirmed | processing | shipped | delivered | cancelled`
- Chỉ Admin role mới được truy cập

## Acceptance Criteria
- Admin thấy được tất cả đơn hàng trong hệ thống
- Dashboard hiển thị đúng số liệu thống kê theo trạng thái
- Filter hoạt động đúng (chọn "Đang giao" chỉ hiện đơn "shipped")
- Đổi trạng thái → Cập nhật ngay trên bảng và dashboard
- Modal chi tiết hiển thị đầy đủ thông tin đơn hàng
- User thường không truy cập được trang này

## Phi chức năng
- UX: Bảng responsive (scroll horizontal trên mobile)
- UX: Dropdown trạng thái có màu sắc phân biệt (pending=vàng, delivered=xanh...)
- Performance: Pagination nếu có nhiều đơn (> 50)
- Security: Verify Admin role ở cả Frontend và Backend

## Status Flow
```
pending → confirmed → processing → shipped → delivered
    ↓         ↓           ↓          ↓
    └─────────┴───────────┴──────────┴──→ cancelled
```

**Giải thích:**
- `pending`: Đơn mới tạo, chờ xác nhận
- `confirmed`: Đã xác nhận, chuẩn bị hàng
- `processing`: Đang đóng gói
- `shipped`: Đã giao cho đơn vị vận chuyển
- `delivered`: Giao hàng thành công
- `cancelled`: Đơn bị hủy (có thể từ bất kỳ trạng thái nào)
